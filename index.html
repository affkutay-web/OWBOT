<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Mini Uygulaması</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        :root {
            --bg-color: #1a1a1a;
            --card-color: #2b2b2b;
            --text-color: #f5f5f5;
            --accent-color: #9b59b6; /* Koyu mor */
            --accent-light: #c085e8;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            min-height: 100vh;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            width: 100%;
            max-width: 500px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            padding-top: 20px;
            opacity: 0;
            animation: fadeIn 0.8s forwards;
        }
        
        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }

        .card {
            background-color: var(--card-color);
            border-radius: 20px;
            padding: 24px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
        }

        .profile-header {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            text-align: center;
        }
        
        .profile-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .profile-icon {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background-color: var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 700;
            color: var(--text-color);
            text-transform: uppercase;
        }
        
        .username {
            font-size: 28px;
            font-weight: 700;
            margin: 0;
            color: var(--accent-light);
        }

        .user-id {
            color: #b0b0b0;
            font-size: 16px;
            margin: 4px 0 0;
        }

        .content-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        h2 {
            font-size: 20px;
            font-weight: 600;
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 8px;
            margin-top: 0;
        }

        /* FAQ Stil Kodları */
        .faq-item {
            border-bottom: 1px solid #3a3a3a;
            padding: 15px 0;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .faq-item:last-child {
            border-bottom: none;
        }

        .faq-question {
            font-weight: 600;
            font-size: 16px;
            color: var(--accent-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .faq-question::after {
            content: '+';
            font-size: 24px;
            transition: transform 0.3s ease;
        }
        
        .faq-item.active .faq-question::after {
            content: '-';
            transform: rotate(180deg);
        }

        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            color: #b0b0b0;
            font-size: 14px;
            padding-top: 0;
        }
        
        .faq-item.active .faq-answer {
            max-height: 200px;
            padding-top: 15px;
        }

        /* Çark Stil Kodları */
        .wheel-container {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            margin: 20px 0;
        }

        #wheel {
            width: 250px;
            height: 250px;
            background-color: #4a4a4a;
            border-radius: 50%;
            border: 5px solid var(--accent-color);
            position: relative;
            overflow: hidden;
            transition: transform 5s cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        .segment {
            position: absolute;
            width: 50%;
            height: 50%;
            top: 0;
            left: 50%;
            transform-origin: 0% 100%;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--text-color);
            font-size: 12px;
            text-align: center;
            border: 1px solid var(--bg-color);
            box-sizing: border-box;
            line-height: 1.2;
        }

        .segment:nth-child(1) { transform: rotate(0deg) skewY(60deg); background-color: #FF5733; }
        .segment:nth-child(2) { transform: rotate(60deg) skewY(60deg); background-color: #33FF57; }
        .segment:nth-child(3) { transform: rotate(120deg) skewY(60deg); background-color: #3357FF; }
        .segment:nth-child(4) { transform: rotate(180deg) skewY(60deg); background-color: #FF33A1; }
        .segment:nth-child(5) { transform: rotate(240deg) skewY(60deg); background-color: #A1FF33; }
        .segment:nth-child(6) { transform: rotate(300deg) skewY(60deg); background-color: #FFC933; }
        
        .segment span {
            display: block;
            transform: skewY(-60deg) rotate(90deg) translateX(45px);
        }

        .pointer {
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 25px solid var(--accent-color);
            position: absolute;
            top: -10px;
            z-index: 10;
        }
        
        #spinBtn {
            margin-top: 20px;
            padding: 12px 24px;
            background-color: var(--accent-color);
            color: var(--text-color);
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
        }

        #spinBtn:hover {
            background-color: var(--accent-light);
            transform: translateY(-2px);
        }

        #spinBtn:disabled {
            background-color: #555;
            cursor: not-allowed;
            transform: none;
        }
        
        #prizeMessage {
            margin-top: 15px;
            font-size: 18px;
            font-weight: 600;
            color: var(--accent-light);
            text-align: center;
            min-height: 25px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="card profile-header">
            <div class="profile-info">
                <div id="profileIcon" class="profile-icon">?</div>
                <h1 class="username" id="username">Yükleniyor...</h1>
            </div>
            <p class="user-id" id="userId"></p>
        </div>

        <div class="card content-section">
            <h2>Günlük Bonus Çarkı</h2>
            <div class="wheel-container">
                <div id="wheel">
                    <div class="segment"><span>10 Puan</span></div>
                    <div class="segment"><span>50 Puan</span></div>
                    <div class="segment"><span>Çevirme Hakkı</span></div>
                    <div class="segment"><span>100 Puan</span></div>
                    <div class="segment"><span>Kaybettin</span></div>
                    <div class="segment"><span>200 Puan</span></div>
                </div>
                <div class="pointer"></div>
            </div>
            <button id="spinBtn">Çarkı Çevir</button>
            <div id="prizeMessage"></div>
        </div>

        <div class="card content-section">
            <h2>Sıkça Sorulan Sorular</h2>
 <div id="faqContainer">
                <div class="faq-item">
                    <div class="faq-question">Nasıl Hesap Açabilirim?</div>
                    <div class="faq-answer">
                        Üye Ol [Kayıt] butonuna tıkladığınızda çıkan kayıt formunu doldurarak kolayca hesap oluşturabilirsiniz. Kayıt sırasında girdiğiniz e-posta adresinizi doğrulamanız gerekmektedir. Adresinizi doğruladığınızda kayıt işlemi de tamamlanacaktır.
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Neden Hesap Açamıyorum?</div>
                    <div class="faq-answer">
                        Daha önce adınıza, e-posta adresinize, telefonunuza, adres bilgilerinize veya IP bilgilerinize kayıtlı bir hesabınız varsa, sistem yeni bir hesap oluşturmanıza izin vermeyecektir. Bu durumda bilgilerinizle birlikte ve sorunu anlatan bir e-posta göndererek müşteri hizmetleri temsilcilerimizden yardım alabilirsiniz.
                    </div>
                </div>
                <div class="faq-item">
                    <div class="faq-question">Botu kullanmak güvenli mi?</div>
                    <div class="faq-answer">
                        Evet, botumuz kişisel bilgilerinizi korumak için tasarlanmıştır. Bot, size sadece güncel fırsatları sunar ve kişisel banka bilgilerinize erişemez.
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">ONWIN’e kayıt olmakla herhangi bir yükümlülük üstleniyor muyum?</div>
                    <div class="faq-answer">
                        Hayır. Siteye kaydınız tamamen bağlayıcılıktan uzaktır ve düzenli olarak para yatırmak veya bahis oynamak mecburiyetiniz yoktur. Bununla birlikte kayıt olmak suretiyle Genel Şirket Şartnamemizi kabul etmiş olursunuz.
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Hesabımı Tamamen Nasıl Kapatabilirim?</div>
                    <div class="faq-answer">
                       Üyelikten ayrılmanızı istemeyiz fakat hesabınızı kapatmak isterseniz yapmanız gereken, kapatma talebinizi nedeniyle birlikte e-posta olarak iletmeniz. En kısa sürede size dönüş yapılarak hesap kapatma işlemi gerçekleştirilecektir.
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Şifremi Unuttum, Ne Yapmalıyım?</div>
                    <div class="faq-answer">
                        Şifrenizi unuttuysanız üst menüde en sağda yer alan soru işaretine tıklayarak yeni bir şifre talep edebilirsiniz. Bu işlem için e-posta adresinizi veya cep telefonu numaranızı kullanabilirsiniz. Ardından geçici bir şifre kayıtlı e-posta adresinize gönderilir.
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Bonusu nasıl çekebilirim?</div>
                    <div class="faq-answer">
                        Verilen bonus tutarının çekilebilmesi için belirli koşulları yerine getirmeniz gereklidir. Bonusun türüne bağlı olarak kazancınızı veya bahis koşullarını yerine getirerek bonus için hesabınıza yatırdığınız tutarı çekebilirsiniz.
Bonuslar, kampanya kural ve şartlarına bağlı olarak bazen oyun oynandıktan önce (çekilmesi kısıtlı bonuslar), bazende oyunlara katıldıktan ve bahis koşulları tümüyle yerine getirildikten sonra oyuncuların hesaplarına işlenir.
                    </div>
                </div>

                <div class="faq-item">
                    <div class="faq-question">Hesabımı doğrulamak zorundamıyım?</div>
                    <div class="faq-answer">
                        Çevrimiçi oyun kuralları uyarınca, yaşı uygun olmayan kişilerin sitemizde oynamadıklarından emin olmak için kimliğinizi ve yaşınızı doğrulamak zorundayız.
                    </div>
                </div>
                
                <div class="faq-item">
                    <div class="faq-question">Birden fazla hesap açabilir miyim?</div>
                    <div class="faq-answer">
                        Sitemizde aynı isim, adres, telefon, e-posta ve IP adresine bağlı ikinci bir hesap oluşturamazsınız. Böyle bir durumda güvenlik birimlerimiz bunu tespit ederek mevcut hesabınız da dahil olmak üzere tüm hesapları kapatacak ve yeni hesap oluşturmanıza izin vermeyecektir.
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        // Firebase yapılandırma kodlarınızı buraya yapıştırın.
        const firebaseConfig = {
  apiKey: "AIzaSyBnktrT7Pp7WucJP_xtEu_mmQle_VthRAE",
  authDomain: "onwingiris-afccf.firebaseapp.com",
  projectId: "onwingiris-afccf",
  storageBucket: "onwingiris-afccf.firebasestorage.app",
  messagingSenderId: "1059998132611",
  appId: "1:1059998132611:web:2fa0e9b46c55d602796eb6",
  measurementId: "G-4SMQRV8R0N"
};
        firebase.initializeApp(firebaseConfig);

        window.addEventListener('load', () => {
            const WebApp = window.Telegram.WebApp;
            WebApp.ready();

            const user = WebApp.initDataUnsafe.user;
            const profileIconElement = document.getElementById('profileIcon');
            const usernameElement = document.getElementById('username');
            const userIdElement = document.getElementById('userId');

            if (user) {
                const userName = user.first_name || 'Kullanıcı';
                const userId = user.id;

                usernameElement.textContent = userName;
                userIdElement.textContent = `@${user.username || 'Kullanıcı ID: ' + userId}`;
                
                if (userName) {
                    profileIconElement.textContent = userName.charAt(0).toUpperCase();
                }
            } else {
                usernameElement.textContent = 'Gizli Kullanıcı';
                userIdElement.textContent = '';
                profileIconElement.textContent = '?';
            }

            // Firebase'e kullanıcı verisini kaydetme
            if (user) {
                const userId = user.id;
                const db = firebase.database();
                const userRef = db.ref('users/' + userId);

                userRef.set({
                    firstName: user.first_name,
                    lastName: user.last_name || null,
                    username: user.username || null,
                    lastLogin: new Date().toISOString()
                }).then(() => {
                    console.log("Kullanıcı verisi Firebase'e kaydedildi.");
                }).catch((error) => {
                    console.error("Firebase'e veri yazılırken hata oluştu: ", error);
                });
            }
            
            // FAQ Açılır-Kapanır İşlevselliği
            const faqItems = document.querySelectorAll('.faq-item');
            faqItems.forEach(item => {
                item.addEventListener('click', () => {
                    item.classList.toggle('active');
                });
            });

            // Çark İşlevselliği
            const wheel = document.getElementById('wheel');
            const spinBtn = document.getElementById('spinBtn');
            const prizeMessage = document.getElementById('prizeMessage');
            
            const prizes = [
                '10 Puan', '50 Puan', 'Ekstra Çevirme Hakkı', '100 Puan', 'Kaybettin', '200 Puan'
            ];
            const prizeAngles = [
                30, 90, 150, 210, 270, 330
            ];

            spinBtn.addEventListener('click', () => {
                const randomSegmentIndex = Math.floor(Math.random() * prizes.length);
                const winningPrize = prizes[randomSegmentIndex];
                const winningAngle = prizeAngles[randomSegmentIndex];

                const spinDegrees = 360 * 5 + (360 - winningAngle);

                wheel.style.transition = 'transform 5s cubic-bezier(0.25, 0.1, 0.25, 1)';
                wheel.style.transform = `rotate(${spinDegrees}deg)`;
                
                spinBtn.disabled = true;

                wheel.addEventListener('transitionend', () => {
                    prizeMessage.textContent = `Tebrikler, ${winningPrize} kazandınız!`;
                    // Çarkı tekrar çevrilebilir hale getir, ancak günlük hak kontrolü ile birlikte.
                }, { once: true });
            });
        });
    </script>
</body>
</html>
